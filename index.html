<!DOCTYPE html>
<html>
<head>
    <title>Temps d'attente STIB</title>
    <script>
        async function fetchTimes() {
            const stopId = '1234'; // Remplacez par l'ID de votre arrêt
            try {
                const response = await fetch(`http://localhost:3000/api/stib?stopId=${stopId}`);
                if (!response.ok) {
                    throw new Error('Erreur lors de la récupération des données');
                }
                const data = await response.json();
                displayTimes(data);
            } catch (error) {
                console.error('Erreur :', error);
            }
        }

        function displayTimes(data) {
            const container = document.getElementById('times');
            container.innerHTML = '';
            data['lines'].forEach(line => {
                const nextPassages = line['passingTimes'].map(passage => 
                    `Ligne ${line['lineId']} - Prochain passage : ${passage['expectedArrivalTime']}`
                ).join('<br>');
                container.innerHTML += `<p>${nextPassages}</p>`;
            });
        }

        window.onload = fetchTimes;
    </script>
</head>
<body>
    <h1>Temps d'attente à l'arrêt</h1>
    <div id="times">Chargement...</div>
</body>
</html>
